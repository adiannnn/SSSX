<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯•ä¸šè®¾è®¡å¸ˆç”ŸåŒé€‰ç³»ç»Ÿ - å­¦ç”Ÿç«¯</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* å­¦ç”Ÿç«¯ç‰¹å®šæ ·å¼å¢å¼º */
        .student-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .student-info p {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            border-radius: 12px;
            transition: all 0.3s ease;
            border-left: 3px solid #667eea;
        }
        
        .student-info p:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left-color: #764ba2;
        }
        
        .teacher-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .teacher-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }
        
        .teacher-card.selected {
            border-color: #48bb78;
            background: linear-gradient(135deg, #f0fff4 0%, #e6fffa 100%);
        }
        
        .teacher-card.selected::after {
            content: 'âœ“';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #48bb78;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }
        
        .team-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* è¿›åº¦æŒ‡ç¤ºå™¨ */
        .progress-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .progress-step {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .progress-step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 15px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: #e2e8f0;
            z-index: 1;
        }
        
        .progress-step.active:not(:last-child)::after {
            background: #667eea;
        }
        
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e2e8f0;
            color: #718096;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 10px;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 2;
            position: relative;
        }
        
        .step-circle.active {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }
        
        .step-text {
            font-size: 0.875rem;
            color: #718096;
        }
        
        .step-text.active {
            color: #667eea;
            font-weight: 600;
        }
        
        /* åŠ¨ç”»æ•ˆæœå¢å¼º */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <div class="navbar">
        <h1>æ¯•ä¸šè®¾è®¡å¸ˆç”ŸåŒé€‰ç³»ç»Ÿ - å­¦ç”Ÿç«¯</h1>
        <button id="initTestDataBtn" style="position: absolute; top: 10px; right: 10px; padding: 5px 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer; display: none;">åˆå§‹åŒ–æµ‹è¯•æ•°æ®</button>
        <div class="nav-menu">
            <a href="#info">ä¸ªäººä¿¡æ¯</a>
            <a href="#notifications">é€šçŸ¥å…¬å‘Š</a>
            <a href="#group">æˆ‘çš„å›¢é˜Ÿ</a>
            <a href="#topic">æ¯•ä¸šè®¾è®¡é¢˜ç›®</a>
            <a href="#teacher-selection">å¯¼å¸ˆé€‰æ‹©</a>
            <a href="#results">åŒ¹é…ç»“æœ</a>
        </div>
        <div class="user-info">
            <span id="userName"></span>
            <button id="logoutBtn" class="btn btn-danger">é€€å‡ºç™»å½•</button>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
            <div class="progress-indicator">
                <div class="progress-step active" data-step="1">
                    <div class="step-circle active">1</div>
                    <div class="step-text active">æŸ¥çœ‹ä¿¡æ¯</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-text">ç»„å»ºå›¢é˜Ÿ</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-text">å¯¼å¸ˆé€‰æ‹©</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-text">æŸ¥çœ‹ç»“æœ</div>
                </div>
            </div>
            
            <!-- ä¸ªäººä¿¡æ¯æ¨¡å— -->
            <section id="info" class="card">
                <h3>ä¸ªäººä¿¡æ¯</h3>
                <div class="student-info">
                    <p><strong>å­¦å·ï¼š</strong><span id="studentId"></span></p>
                    <p><strong>å§“åï¼š</strong><span id="studentName"></span></p>
                    <p><strong>ä¸“ä¸šï¼š</strong><span id="studentMajor"></span></p>
                    <p><strong>å¹´çº§ï¼š</strong><span id="studentGrade"></span></p>
                    <p><strong>ç­çº§ï¼š</strong><span id="studentClass"></span></p>
                    <p><strong>è”ç³»ç”µè¯ï¼š</strong><span id="studentPhone"></span></p>
                    <div class="message message-info">
                        <p>å¦‚æœ‰ä¿¡æ¯é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ä¿®æ”¹</p>
                    </div>
                </div>
            </section>

        <!-- é€šçŸ¥å…¬å‘Šæ¨¡å— -->
        <section id="notifications" class="card">
            <h3>é€šçŸ¥å…¬å‘Š</h3>
            <div class="search-container">
                <input type="text" id="notification-search-input" placeholder="æœç´¢å…¬å‘Šæ ‡é¢˜..." class="form-control">
                <button id="notification-search-btn" class="btn btn-primary search-btn">æœç´¢</button>
            </div>
            <div id="notification-list" class="notification-list">
                <!-- å…¬å‘Šåˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </section>

        <!-- å›¢é˜Ÿæ¨¡å— -->
        <section id="group" class="card">
            <h3>æˆ‘çš„å›¢é˜Ÿ</h3>
            <div id="myTeamInfo" class="team-info">
                <!-- æœªç»„é˜Ÿæ—¶æ˜¾ç¤º -->
                <div id="notInTeam" class="message message-info">
                    <p>æ‚¨å°šæœªåŠ å…¥ä»»ä½•å›¢é˜Ÿï¼Œè¯·åˆ›å»ºå›¢é˜Ÿæˆ–åŠ å…¥å…¶ä»–å›¢é˜Ÿ</p>
                </div>
                <!-- å·²ç»„é˜Ÿæ—¶æ˜¾ç¤º (é»˜è®¤éšè—) -->
                <div id="teamDetail" style="display: none;">
                    <h4>å›¢é˜Ÿä¿¡æ¯</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div class="team-info-card">
                            <p><strong>å›¢é˜Ÿåç§°ï¼š</strong><span id="teamName"></span></p>
                        </div>
                        <div class="team-info-card">
                            <p><strong>ç»„é•¿ï¼š</strong><span id="teamLeader"></span></p>
                        </div>
                    </div>
                    <p><strong>å›¢é˜Ÿæˆå‘˜ï¼š</strong></p>
                    <ul id="teamMembers" style="display: flex; flex-wrap: wrap; gap: 10px; list-style: none; padding: 0;">
                        <!-- æˆå‘˜å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </ul>
                </div>
            </div>
            
            <div class="team-actions">
                <button id="createTeamBtn" class="btn btn-primary">åˆ›å»ºå›¢é˜Ÿ</button>
                <button id="joinTeamBtn" class="btn btn-success">åŠ å…¥å›¢é˜Ÿ</button>
                <button id="manageTeamBtn" class="btn btn-warning">ç®¡ç†å›¢é˜Ÿ</button>
            </div>
            
            <style>
                .team-info-card {
                    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                    padding: 15px;
                    border-radius: 12px;
                    border-left: 3px solid #667eea;
                    transition: all 0.3s ease;
                }
                
                #teamMembers li {
                    background: #667eea;
                    color: white;
                    padding: 8px 15px;
                    border-radius: 20px;
                    font-size: 0.875rem;
                    transition: all 0.3s ease;
                }
                
                #teamMembers li:hover {
                    background: #764ba2;
                    transform: scale(1.05);
                }
            </style>
        </section>

        <!-- æ¯•ä¸šè®¾è®¡é¢˜ç›®æ¨¡å— -->
        <section id="topic" class="card">
            <h3>æ¯•ä¸šè®¾è®¡é¢˜ç›®</h3>
            <div id="topicContent">
                <div id="topicForm" style="display: none;">
                    <div class="form-group">
                        <label for="topicName">é¢˜ç›®åç§°</label>
                        <input type="text" id="topicName" placeholder="è¯·è¾“å…¥æ¯•ä¸šè®¾è®¡é¢˜ç›®" required>
                    </div>
                    <div class="form-group">
                        <label for="topicDescription">é¢˜ç›®æè¿°</label>
                        <textarea id="topicDescription" rows="5" placeholder="è¯·è¯¦ç»†æè¿°é¢˜ç›®çš„ç ”ç©¶å†…å®¹å’Œè¦æ±‚" required></textarea>
                    </div>
                    <button id="submitTopicBtn" class="btn btn-primary">æäº¤é¢˜ç›®</button>
                </div>
                <div id="topicInfo" style="display: none;">
                    <h4 id="savedTopicName"></h4>
                    <p id="savedTopicDescription"></p>
                    <span id="topicSubmitDate"></span>
                </div>
                <div id="notLeaderAlert" class="message message-warning">
                    <p>åªæœ‰å›¢é˜Ÿç»„é•¿å¯ä»¥è®¾ç½®æ¯•ä¸šè®¾è®¡é¢˜ç›®</p>
                </div>
            </div>
        </section>

        <!-- å¯¼å¸ˆé€‰æ‹©æ¨¡å— -->
        <section id="teacher-selection" class="card">
            <h3>å¯¼å¸ˆé€‰æ‹©</h3>
            <div class="teacher-selection-info message message-info">
                <p>è¯·é€‰æ‹©3ä½å¯¼å¸ˆä½œä¸ºå¿—æ„¿ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº</p>
                <div class="selection-progress">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill" style="width: 0%;"></div>
                    </div>
                    <span id="selection-count">å·²é€‰æ‹©ï¼š0/3</span>
                </div>
            </div>
            <div id="teacherSelectionContent">
                <div id="teacherList" class="teacher-list">
                    <!-- å¯¼å¸ˆåˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div id="selectedTeachers" style="display: none;">
                    <h4>å·²é€‰æ‹©çš„å¯¼å¸ˆ</h4>
                    <ul id="selectedTeachersList" style="list-style: none; padding: 0;">
                        <!-- å·²é€‰å¯¼å¸ˆå°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </ul>
                    <button id="confirmSelectionBtn" class="btn btn-primary">ç¡®è®¤é€‰æ‹©</button>
                </div>
            </div>
            
            <style>
                .selection-progress {
                    margin-top: 15px;
                }
                
                .progress-bar {
                    height: 8px;
                    background: #e2e8f0;
                    border-radius: 4px;
                    overflow: hidden;
                    margin-bottom: 5px;
                }
                
                .progress-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #667eea, #764ba2);
                    transition: width 0.3s ease;
                    border-radius: 4px;
                }
                
                #selection-count {
                    font-size: 0.875rem;
                    color: #667eea;
                    font-weight: 600;
                }
                
                #selectedTeachersList li {
                    background: linear-gradient(135deg, #e6fffa 0%, #f0fff4 100%);
                    padding: 12px 20px;
                    margin-bottom: 10px;
                    border-radius: 8px;
                    border-left: 3px solid #48bb78;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    transition: all 0.3s ease;
                }
                
                #selectedTeachersList li:hover {
                    transform: translateX(5px);
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                }
            </style>
        </section>

        <!-- åŒ¹é…ç»“æœæ¨¡å— -->
        <section id="results" class="card">
            <h3>åŒ¹é…ç»“æœ</h3>
            <div id="matchingResults">
                <div class="message message-info">
                    <p>ç³»ç»ŸåŒ¹é…å°šæœªå®Œæˆï¼Œè¯·è€å¿ƒç­‰å¾…</p>
                </div>
                <!-- åŒ¹é…ç»“æœå°†åœ¨ç³»ç»Ÿå®ŒæˆåŒ¹é…åæ˜¾ç¤º -->
                <div id="matchResultDetail" style="display: none;">
                    <div class="match-result-card">
                        <h4>æ­å–œï¼åŒ¹é…æˆåŠŸ</h4>
                        <div class="match-info">
                            <p><strong>æ‚¨çš„å¯¼å¸ˆï¼š</strong><span id="matchedTeacher"></span></p>
                            <p><strong>åŒ¹é…æ—¶é—´ï¼š</strong><span id="matchTime"></span></p>
                            <p><strong>åŒ¹é…çŠ¶æ€ï¼š</strong><span class="status-badge success">å·²ç¡®è®¤</span></p>
                        </div>
                        <div class="match-action">
                            <button id="contactTeacherBtn" class="btn btn-primary">è”ç³»å¯¼å¸ˆ</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <style>
                .match-result-card {
                    background: linear-gradient(135deg, #c6f6d5 0%, #9ae6b4 100%);
                    padding: 30px;
                    border-radius: 16px;
                    text-align: center;
                    position: relative;
                    overflow: hidden;
                    animation: float 4s ease-in-out infinite;
                }
                
                .match-result-card::before {
                    content: 'ğŸ‰';
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    font-size: 40px;
                    opacity: 0.8;
                }
                
                .match-info {
                    margin: 20px 0;
                }
                
                .match-info p {
                    background: white;
                    padding: 15px;
                    border-radius: 12px;
                    margin-bottom: 15px;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                    transition: all 0.3s ease;
                }
                
                .match-info p:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
                }
                
                .status-badge {
                    padding: 5px 12px;
                    border-radius: 20px;
                    font-weight: 600;
                    font-size: 0.875rem;
                }
                
                .status-badge.success {
                    background: #22543d;
                    color: white;
                }
            </style>
        </section>
    </div>

    <!-- æ¨¡æ€æ¡† - åˆ›å»ºå›¢é˜Ÿ -->
    <div id="createTeamModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>åˆ›å»ºå›¢é˜Ÿ</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newTeamName">å›¢é˜Ÿåç§°</label>
                    <input type="text" id="newTeamName" placeholder="è¯·è¾“å…¥å›¢é˜Ÿåç§°" required>
                </div>
                <button id="confirmCreateTeamBtn" class="btn btn-primary">åˆ›å»º</button>
            </div>
        </div>
    </div>
    
    <!-- æ¨¡æ€æ¡† - é€‰æ‹©æ·»åŠ æˆå‘˜ -->
    <div id="addMemberModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ·»åŠ å›¢é˜Ÿæˆå‘˜</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <h4>æœªç»„é˜Ÿå­¦ç”Ÿåˆ—è¡¨</h4>
                <div class="filter-container" style="margin-bottom: 15px;">
                    <input type="text" id="studentIdFilter" placeholder="è¾“å…¥å­¦å·ç­›é€‰å­¦ç”Ÿ..." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                </div>
                <div id="unassignedStudentList" class="student-list">
                    <!-- æœªç»„é˜Ÿå­¦ç”Ÿåˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                <button id="closeAddMemberBtn" class="btn btn-secondary">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <!-- æ¨¡æ€æ¡† - é€‰æ‹©ç§»é™¤æˆå‘˜ -->
    <div id="removeMemberModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ç§»é™¤å›¢é˜Ÿæˆå‘˜</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <h4>å›¢é˜Ÿæˆå‘˜åˆ—è¡¨ï¼ˆç»„é•¿ä¸å¯ç§»é™¤ï¼‰</h4>
                <div id="teamMemberList" class="student-list">
                    <!-- å›¢é˜Ÿæˆå‘˜åˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                <button id="closeRemoveMemberBtn" class="btn btn-secondary">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <!-- åŠ å…¥å›¢é˜Ÿæ¨¡æ€æ¡† -->
    <div id="joinTeamModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>åŠ å…¥å›¢é˜Ÿ</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="search-container">
                    <input type="text" id="teamSearch" placeholder="æœç´¢å›¢é˜Ÿåç§°..." class="form-control">
                </div>
                <div id="availableTeamsList" class="team-list">
                    <!-- å¯ç”¨å›¢é˜Ÿåˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    <div class="loading-indicator">åŠ è½½å›¢é˜Ÿåˆ—è¡¨ä¸­...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeJoinTeamBtn" class="btn btn-secondary">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- å…¬å‘Šè¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="notificationDetailModal" class="modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalNotificationTitle">å…¬å‘Šè¯¦æƒ…</h3>
                    <button type="button" class="close-modal" aria-label="å…³é—­">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="notification-detail">
                        <p class="notification-meta">
                            <strong>å‘å¸ƒäººï¼š</strong><span id="modalNotificationAuthor"></span>
                        </p>
                        <p class="notification-meta">
                            <strong>å‘å¸ƒæ—¶é—´ï¼š</strong><span id="modalNotificationTime"></span>
                        </p>
                        <div class="notification-content" id="modalNotificationContent">
                            <!-- å…¬å‘Šå†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="closeNotificationBtn">å…³é—­</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/student.js"></script>
</body>
</html>